(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,t,s){},108:function(e,t,s){},109:function(e,t,s){},117:function(e,t,s){},146:function(e,t,s){},147:function(e,t,s){},148:function(e,t,s){},150:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),i=s(37),r=s.n(i),c=(s(87),s(6)),o=s(5),u=s(8),l=s(7),d=s(20),h=s(4),p=s(27),m=s(3),j=s.n(m),g=s(31),b=s.n(g),v=s(38),f=function(e,t){return O.apply(this,arguments)};function O(){return(O=Object(v.a)(b.a.mark((function e(t,s){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="AUTH"===e.t0?3:"STATUS"===e.t0?6:"GET_USER"===e.t0?14:"GET_USER_ID"===e.t0?23:24;break;case 3:return localStorage.setItem("JWT_PAYLOAD",s.token),localStorage.setItem("_ID",s.user._id),e.abrupt("break",24);case 6:return e.next=8,localStorage.getItem("JWT_PAYLOAD");case 8:if(!e.sent){e.next=12;break}e.t1=!0,e.next=13;break;case 12:e.t1=!1;case 13:return e.abrupt("return",e.t1);case 14:if(localStorage.getItem("JWT_PAYLOAD")){e.next=17;break}return e.abrupt("return",!1);case 17:if(!(a=!!localStorage.getItem("_ID")&&localStorage.getItem("_ID"))){e.next=21;break}return e.next=21,j.a.post("/api/users/get-user",{_id:a}).then((function(e){n=e.data.payload})).catch((function(e){n=!1}));case 21:return e.abrupt("return",n);case 23:return e.abrupt("return",localStorage.getItem("_ID")?localStorage.getItem("_ID"):"");case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s(106);var x=s(0),C=function(e){Object(u.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleInput=function(e){a.setState(Object(p.a)({},e.target.className,e.target.value))},a.setTab=function(e){a.setState({tab:e})},a.signUp=function(){var e={email:a.state.registerEmail,password:a.state.registerPassword,firstName:a.state.firstName,lastName:a.state.lastName};j.a.post("/api/users/register",e).then((function(e){a.setState({tab:"sign-in"})}))},a.signIn=function(){var e={email:a.state.signInEmail,password:a.state.signInPassword};j.a.post("/api/users/login",e).then((function(e){"true"!=e.data.success&&a.setState({error:e.data.message}),e.data.user&&e.data.token&&(f("AUTH",e.data),j.a.defaults.headers.common.Authorization=localStorage.getItem("JWT_PAYLOAD"),setTimeout((function(){a.props.history.push("/chat")}),300))}))},a.state={tab:"sign-in",firstName:"",lastName:"",signInEmail:"",signInPassword:"",registerEmail:"",registerPassword:"",error:""},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;f("STATUS").then((function(t){t&&e.props.history.push("/chat")}))}},{key:"render",value:function(){var e=this;return Object(x.jsx)("div",{className:"sign-in-wrapper",children:"sign-in"===this.state.tab?Object(x.jsxs)("div",{className:"sign-in",children:[Object(x.jsx)("div",{children:"Login"}),Object(x.jsx)("div",{style:{height:"30px",marginTop:"6px",color:"red",fontWeight:"200"},children:this.state.error}),Object(x.jsxs)("div",{className:"form",children:[Object(x.jsx)("input",{type:"text",value:this.state.signInEmail,className:"signInEmail",onChange:function(t){return e.handleInput(t)},placeholder:"Type Your Email"}),Object(x.jsx)("input",{type:"password",value:this.state.signInPassword,className:"signInPassword",onChange:function(t){return e.handleInput(t)},placeholder:"Type your password"}),Object(x.jsx)("div",{onClick:function(){return e.setTab("sign-up")},className:"no-account",children:"No account? Create one"}),Object(x.jsx)("div",{className:"button",onClick:function(){return e.signIn()},children:Object(x.jsx)("button",{children:"Sign In"})})]})]}):Object(x.jsxs)("div",{className:"sign-in",children:[Object(x.jsx)("div",{children:"Sign up"}),Object(x.jsxs)("div",{className:"form",children:[Object(x.jsx)("input",{type:"text",value:this.state.firstName,className:"firstName",onChange:function(t){return e.handleInput(t)},placeholder:"Type Your First name"}),Object(x.jsx)("input",{type:"text",value:this.state.lastName,className:"lastName",onChange:function(t){return e.handleInput(t)},placeholder:"Type Your Last name"}),Object(x.jsx)("input",{type:"text",value:this.state.registerEmail,className:"registerEmail",onChange:function(t){return e.handleInput(t)},placeholder:"Type Your Email"}),Object(x.jsx)("input",{type:"password",value:this.state.registerPassword,className:"registerPassword",onChange:function(t){return e.handleInput(t)},placeholder:"Type your password"}),Object(x.jsx)("div",{onClick:function(){return e.setTab("sign-in")},className:"no-account",children:"Already have an account?"}),Object(x.jsx)("div",{className:"button",children:Object(x.jsx)("button",{onClick:function(){return e.signUp()},children:"Sign Up"})})]})]})})}}]),s}(n.a.Component),S=(s(108),s(46)),w=s.n(S),N=s(49),y=s.n(N),I=s(75),A=s.n(I),E=s(40),T=s.n(E),B=(s(109),function(e){Object(u.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).hideScreen=function(){document.getElementsByTagName("html")[0].style.overflow="hidden"},a.showScreen=function(){document.getElementsByTagName("html")[0].style.overflow="auto"},a}return Object(o.a)(s,[{key:"render",value:function(){var e=void 0;return!0===this.props.model?this.hideScreen():this.showScreen(),this.props.model&&(e=Object(x.jsx)("div",{style:{overflow:"scoll",position:"absolute",top:"0",bottom:"0",left:"0",right:"0",zIndex:this.props.zIndex?this.props.zIndex:20,width:"100vw",backgroundColor:this.props.backgroundColor?this.props.backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(x.jsx)("div",{style:{backgroundColor:this.props.noBg?"":"white"},children:this.props.children})})),Object(x.jsx)("div",{children:e})}}]),s}(n.a.Component)),M=s(21),U=s.n(M),k=function(e){Object(u.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).setUserSearch=function(){var e=Object(v.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({searchUser:t.target.value});case 2:if(0!==t.target.value.length){e.next=5;break}return a.setState({users:[]}),e.abrupt("return");case 5:return e.next=7,j.a.post("/api/users/user-by-search",{email:a.state.searchUser,userId:localStorage.getItem("_ID")}).then((function(e){a.setState({users:e.data})}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.addConversation=function(e){j.a.post("/api/chat/new-chat",{myId:localStorage.getItem("_ID"),themId:e._id,fullName:a.props.user.firstName+" "+a.props.user.lastName}).then((function(t){a.setState({modalMessage:t.data.message}),a.props.emitNewConversation(e._id),a.setState({showMessage:!0}),setTimeout((function(){a.setState({modalMessage:""}),a.setState({showMessage:!1})}),2e3),setTimeout((function(){a.setState({showModal:!1})}),2500)}))},a.logout=function(){localStorage.clear(),a.props.history.push("/")},a.getName=function(e){return e.filter((function(e){if(e!==a.props.user.firstName+" "+a.props.user.lastName)return e}))[0]},a.selectConvo=function(e){a.props.setActiveChat(e),window.innerWidth<700&&(U()("#side-bar-wrapper").hide(),U()("#main-chat-wrapper").show())},a.state={searchInput:"",searchUser:"",users:[],modalMessage:"",showModal:!1,showMessage:!1},a}return Object(o.a)(s,[{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{className:"sidebar-wrapper",id:"side-bar-wrapper",children:[Object(x.jsx)(w.a,{onClick:function(){return e.setState({showModal:!0})},className:"add-icon"}),Object(x.jsx)(d.b,{className:"link",to:"/settings",children:Object(x.jsx)(A.a,{className:"settings-icon"})}),Object(x.jsx)(d.b,{onClick:function(){return localStorage.clear()},className:"link",to:"/sign-in",children:Object(x.jsx)("div",{className:"settings-icon logout",children:"Logout"})}),Object(x.jsxs)("div",{className:"user-wrapper",children:[Object(x.jsx)("img",{src:this.props.user&&this.props.user.avatar?this.props.user.avatar.url:"data:image/png;base64,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"}),Object(x.jsx)("div",{children:this.props.user?this.props.user.firstName+" "+this.props.user.lastName:"No name"}),Object(x.jsx)("div",{children:this.props.user?this.props.user.email:"No email"})]}),Object(x.jsxs)("div",{className:"search-input",children:[Object(x.jsx)("input",{value:this.state.searchInput,onChange:function(t){return e.setState({searchInput:t.target.value})},type:"text"}),Object(x.jsx)(y.a,{})]}),Object(x.jsx)("div",{className:"conversations",children:this.props.conversations.map((function(t,s){return Object(x.jsxs)("div",{className:Object.keys(e.props.activeChat).length&&e.props.activeChat._id===t._id?"conversation active-conversation":"conversation",onClick:function(){return e.selectConvo(t)},children:[Object(x.jsx)("div",{className:"left",children:Object(x.jsx)("img",{src:t.themUser.avatar&&t.themUser.avatar.url?t.themUser.avatar.url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAABX1BMVEX///9LwZD/u5RFp5tRVXDr8fg5PFT7qHViZn7/vZVLwo//wJb/vJb8rX34VWVFqZ23kYY4NVA8pJg7vYlMUm+XycJBhYR2aXY+QVr/totFpZyCcHr/qHMnK0hHspfCwsdGrJnXo4xItpVJuZRcYHk4MVBGq5pKvZLd8ulaxpl4z6rA6NaK1LT1/Pmv4cvP7eDEmIie28Dr+PJFSWJBTW7ztJEpNFFaqZrtuZVpy6LI6tuY2bxDmZI+bXSDrZnNtZbU2uRAd24+Z2U8V187S1pDi3ZIrodFlnyOd3toYnRAe33NnYljUlqifnRvp5S3jHukp4t3YmbQqIDmqHnUtpYgOlOksJjv4dz1xKrx1srn5+msrbYVGz0/a2g6R1lCg3OJZmDcl3ConoJTTFuKp4+Ea2rqqHmKipVydIOcSFzMT2FHPlWuSl1WP1blUmNqQVjcW2fro4jYhXnbcXB3u7Qy9BYEAAASpUlEQVR4nO2dj1cTxxbHTQJJdxOE/LAEDGo0KAECSH4AyhMVRC0KWq1tsY/aaqtPW9+z5f8/b39kd2dn7p25s9mQ0MPX0x4lu8t8cu/ce2d2dvbcuTOd6UxnOtOZhkGrywtLNxfnN+qJhFksFs1Evb4xv3hzaWF5ddBN61WNuYXb8/WiI9M0LUDrv4T7F9P9cX3+5sJcY9ANjaS5hcWNhA2WkMtGTWwsLs0NusFaWl2aT3StRpJj0cT80ulw2sbyTYrpEGPeXh5yj20s304U9eEYzGJi8dbwQs4t1qMYTzBlfXF50CiQGkv1nqwXoizWl4bNkHOLVieKU8Xi4jBF1+X52MwXyCxu3Bo0WFcL8bknz1hfGDScpVv94nMZE4NmXNiIt/uJKtYH6atz/eh/vKz+OKiY01jU5PPKOHo55zEuDiR3LOnwmQ7VDU/eD+iMSyfON0fugDbK7u6De/e3d8r5WVv58s72/XsPdnc1rHnirnqTaEALYffBv3fSFlY+nw5k/Ss/m965/2CXCmkWb54g31ydZEAb795RfpZFC8v67OjeboIGWayfmBlJPdDFk9AFlGki5En1xtV5igHNxMNtAp4Huf2QxFicP4FB8nJC3RLLfg8o5mMZj36mMJqJvg+slggGNBMPLNcDVLbUtP8HfTibf0D48hJ9DjhWkicY8OERz1duNksjYZWaTR509ughwYzF+T6m/1VCEjR3t2c5Oh6OEUc5e3+XgFjvW2ecU3uRaf4cynvlJk4HQebzP6vNaJp9Shu3tA2oxutCsmbcppixL+MNQhY0H6YDAxLMBxoyn36o/kX9yIyEOs28N6tvP8COs/cIVow9pN5UuqiZuD8bmS/MOLut7vFxI95WAVo12o7voeUIfCHG/M6uMuAUb58s4I1COd+LAXnEcuHGSSKqXNRMXNpM92pAV0HE2bykYozPURWAZuJqKgCMbkDOjOnN1FVFd4wLUVGKmjeupzb9r15SvxBV8h11M3VdYcZ4ksYteZowL6XGU0exeKgn7+s6sq58SW7GOFL/nBTQNmBqfDsfJ6CPmN8ZTynMaBZ7LuBW5Qa8Om0B/itmwADxXxZi6qq8CT2W4Y265PJWCLUBv44dMED82kKcviLzVLPe22BKNh50PDQ1vtkHwABx07ai1FOL870AyvKEeS1la9yLMrECjox40Wbc+S3XZIg95IxlGaDdBZlOGDOglzTcrpialnXGYuS5m1X8olaScAE9H+09D2KIm64VL8niTdRoM49f1LyScn10J55KBlK3utlxCWWIZsSuKKllzCvTLuA3+T5EGU9utMl/00W8giNGq23mJJ3Qs+B0f6KMp+7Vpz1EvEGREr8kE3YB/TAD+2jtqxqR5Kuw/NOabLCRIpp1fUA8UZg+4KYsE9ZCjZWo9pUg76Ny2IgSR9VPGbiPWqU2Z0KZYdSIAGBwFmdESbjR9tMN7FIM4LQ0jvL2QATwCX4aGBFHNDf0ANE42k30bCBV2UZmRsiAoW8lHE5ldbhePG2ggNcCwFRZngqD1mOMCB97uGvEcspHnEYLuKJOCb6IXMW84X+X/piCZKCaCFmrwUycgjGGJ6wMNxfpgHiYuc4QbiurmbCNGMoa94nkGq4RtxnC61jjNIINFmb8POHEGZUJRUa1U6JGnGYQsWhDL94WEBMyUcaPM8qCVAmoukCTjzX4QIM8a4NUM2wn9Gtu9ZiiJrMj0D95lQQ3TU0jXZFa2WB30czrLOA0X86UQgpDkvwTu0CZS4l2V8SMSFvJCJ/MpHomkjb91tUuhjTCGVeE5KzHX6DmQzaFaCpJ/BRApBeGfdSr2LqtaD2qZsNqPxb9txZI9MXJNneF6qNW9zOucpOlDJIRsTHF9TDhDhNJW3tZIxmW0fYbSFHrUU64QnalFRD6A2HPTxFHI/REpBeG4qjfDV0nba1kk4IMY6JFndooWVfgAS15iE2xI6LxlBBOkamLGyFAb37GISw9AgDtBrYnSYyl1sU2coWLJZ/Qm68J4ilsCWVORMoZNtc7hG42dE1YBb5/14x7j5WuWmo93jOwC1RbvpuGMqIk2CgLG7gi5cKMF2jcXFFrIw20mpibqEntaPGtJPHT2zXnqDIQarA5VFV1igwqeBN2i1KHsDSJttA2o7E32UIgS63WxSpmP/f0yZJHGM75tpABv2KIAY8LmTGTR3gUdMNJuBP5rcy2JyZHWuEqwPpXa+TiShsKMIyyk0FHPOIJESMqxol12ITX+Yun8mRC25DZdnXi0WTNMpqjkdrko4mqhSfnCxPmhTYglY00YcBxBjDh9KwfaNSEDqSRTebannKGRafCCwidUDM7zRsRGQxLYw0SZwQTdpMFndDD9EQ8I0S4KbgpbERZrGmATmre4E3oVaWahPpiCfmEmELHGJI7ivC9JiGQeoTlEyMsi7W3IzicSu5FwU7K58IhIkyBhQ3upg3wbnJ41DRkhGBhYyYwN0VuiIqpYngI4SEG6qa3wS9ESBXDRAgnDBNb8QZ+H0CcGSJCrHSDAVdhJwVMOESE07Cbwre9wZrUvApcdogI4fsYSG0Kjn1BJx0mQtBNkXEwmCuAZMgTIkP8WAgfKQnBlGiCHRGsurvLgmSErRVqlakvY6+lJITdFKq+wVlE2ElZwlKtb3w24uOSihBM+uCsIlyyAek+TMjM0uQM60/OMDTHEKETcjn7KsFnbWd+QEYIJn2wcANvOMHdMCAsjVT9XphbmbC14mjPUrVazan52tWqffCee557CfbjxxajjBCcdIPueYNFKZwruoSdTuvx02AWyqhOiCL00RXgNGZuy8g9nRzpdHBCsCNCpSkcaOBu6BB23vwylhljHSoSYU5BmMyNZTK/vOnghGC+AEINfLsC7oYW4cyTXzKWxhg3tP3NVuBzEyv4RCP7xfh+vedeIXSWTWgxPpnBCMGOCIQasOwWR/ce4ZtMhie0HMoQpALkAo0TbMJnuYSZzBuMEOyIwAoiqKIBxxW2Cr9WAML+yCOs/FpACKHxBVDVQFM00ODXAXzXBUQJ6ZNN3vFKwkzlHYIIZkRxTlEn0KxlMlJCy9PaySzZvEY2186hjD5hJrMGNwcONTwgOHQyYc8vfFuREmarz9Odt0/VUaYLmHv6tpN+voeUtwFh5VvYiOCkojCAAmcwTLgb7lekNswe2OnLYqQh5tpv7cPTnacwImPDyj7YnmmQkJ/JgJMFSFjYkhIaVafBVpOfkAizz73j4bt0LOEWaERwFCykC3D4CyeLQiYjI8z+1m0x1GSr7MS+kHT6uYowk4EJr0GE/CAYWjCL1GxrFSlh8q3XYsHvclNjY1M84YFP2ATdmiWswLEGShdCQoRGFsgMxjspoZHDCaecc8I/ywaEZTXhO/JMhjC6ABM+mA4Lz+Q2zD7xCQ+4FkPnGHs+4VuAjyN8BroplBCFlA+NnaIRBm5XbnOfds8JH54rYybvjZAfP4ElDZjwC68U/dB44iLOHIBOyhH6Ruw8EZbUiIRwWQOmfL6ooROy6RAmTP7WsSWssoEJk9m9tH34cyHMAoRwQiQRguNfZOykILTv3K8c7CUFn0MIrSKvenCA3tIPEcINggiF6TboAX+EsPBCXtPYrQIHThihU6ijVSyb8V/QyzbT5AjBog0hfKUkhIUTysQSvtIpTCmEyJAz9fuACH9H2jMemRDph8Hw8GQJ0QEiyYYa/ZAdPp0kITZ4IvZDnVhq+6n+LIaV7bxzkLwgJ6xgPkqMpRr50FE3ntIJc1NB0NcyY5ew8gJvTNwZ39VWpaJDGBoDZfjyW3lmpbIlaQuJkF6XdlW488JipNswDJjhB1FSwkrlxR2sD9oi1aX0sYWn8cL+ry8yVMIpnpDu3pkXW/sFLHHhhPzYgj4+ZO1YSJFNEZkwaf8auUjjQ40xfkjrVEtE7ofr6kaQxvga8zSsxqmEySSLqBNL11UWJM7TaMy1sSq8JLc0h/xdpZdqQqjpwlybznwpS/isfzfxXRnwsD5ESJov1ZnzZgnf9Z0QK0YD0ea8te5bBBrf7zNgMrmv/Jpp9y207j2xooeaaFpXAsLrTcR7T1r3DwNphJpoIgQa4v1DrXvADOErZUfMZrNTsIyscjmVgQzrWULiPWCt+/iM1pSEz/Pvhd/m6n0evlXBEiL3DBlR7+PDazHUHbGg6Ij2BPEIQvg431Et1lDne2RRlLgWQ2s9DUuocFNjpZOeeQ0Cvp5Jd/YUZ6udlLyeRmtNFCuFmzp3z2Y+XBb1Ycb6gJ/4589WOyl5TZTWuraQERXRNOs8DjIjylk4pgg16kiqsa5NZ21iiPCO4vmzp/7NJUHYnW3fhNKBryv62kSd9aVhyWON0Q4Iv3MVECqclDBy0lhfqrNGOCRVrPFve3+X/s/Hz+fPf/zjU5ex85vChIQ4kwKdFF6sr7HOm0OUGzHX7t4h/OO8p4+fnB98UpmQAKizzltjrb6mEZ07hH9+Ps/ov9+hiy/0TKizVh953kL9S5RZP3swk/50Pqw/xTuoUUyo9byFxjMzPKEinNrLET5zhJ/zKkBKINV7ZkbjuScBcUuF+OV/POEXFSC8PIgzod5zT/Rn1wQp62+j/Rdrxc9/KZeEEcoZ7WfX6M8fClLPZhjZ9pe/P7p4f39RPaZOmr1IaT9/SH+GFEBU+anz0HrWXijdzqofU6f5qPYzpPTngCFE0nQG+SEMwuRFKsJzwORnuSHCWOekcvsUEyIP5Mt2h6Y+jw8iylOG1hp3UqKI8jw+eU8FGFFW2niPKviSxVJSMRNtTwX6vhi6iOLjJu1eASPti0He20QXEXigBjUiFTDa3ibU/Wn0EfmnotCqmwwYbX8a6h5DKCKa+amRhpbpbcGbYih3wCTuE4Uj3qE+hAArR4uiKdyEyg0wsW3KaT3RQlxbj45orK9RAeFhE2X/S9p+bVLGyPcUCfcKfUBsvzbCHvu0PfekiHcimdFYJ3toT3vuEfdNlCOmIpjReJaiA/a0byJt70sV49pLzYfXXpJ7oK2e9r6k7V+qZtx/SX5CzzBekiptX+j+pcRNaLFthEljjACxsL+Fb6fH8iW39pWLgkJC9kyk71qOGpEeT7uMa6+SipWW1sfP1vT4YthHGM2J5LzvaTxVsR90QiBt+KmxinzNGiDs/QEaG8+T9vOmyVmi6VCy62bdf0yNOQsrdS8Zx37epD3Z6YTuQq8x+8590vljaSxYva17yTj2ZCftqy9TwRfz9AmiSnAw5dIx7atPejcCzpc6Pr7QFYHQO/T4mJDy8dci6b5rhvB+C85agY5HA/2gQqysM0cfQ5cL/b7Y3m9BekeJ9dvHA2sFGmU1JUesTIWOFi92fDzOUEpew6L9Lh3Ve2YsugvwRUNNHj1U2PAwfDj8dV/opsw43zOjeFdQIYXgCYSj38uMWPl+lEBoafWC9TvjfVeQ7H1P5qULeNwa5fUjjlj5UTgavW7jwiW0QdHe94TH02Jddj2hzXi0qfwgHiy58hz6aveo7yNFireiPLOKjR5NwoiVJHCs9NrIe4mjvncNeXeesk+LrT4cAwn5KKMmxPwq8ps6oXtR6qAFNBuMNkKUUQPCiNHffwhdT+GiCCEUbYAoQyAE3hva20uBhesRojLUcDHaQFGGQihkMcJ3LhP/LlmKQ4AtH22HEcEoQyLkuo650du7ZLloQyv+wKbztQ0UZSiAQojv8X3A3DudaX0atk4o2oBRhkjIGjGGdzqH3stNrd/h1jPRBo4yNEB23GPG8V5uNqBSoxbc/CDaIFGGSqjfIJW8YYZknQonBKBb22BRhggYrPvp5V3HYXUR0cVUghCC0W5tg31MvXx3eVp8gF49qNGrEYTvHUAkypABu6soi+QvnCIbUWueAIGwog0WZTQInVgTL6DjqFpxC6P4AY0yGoD2rHycLurKCmBax6OIMQBapVv8gBaiZmSGOe7W7sYAqN0YmjTrPxhwpDQCI/a1LX0SCGgLQhx0Y6NJBHTe+VQqiYiDbmpUgRYcARx10A1lpdcBwoA1761dJS7c9LEFfRdgQZfxblTAoRMMGHLUQTexVwkuyjvqoBsISqsruBzv+RcEti7rAw5ZF/TlcFzmX/5cOjw3tBbUls3R4AE/dD8YYmm6zOvwG0lbh/1p1SD1nvXT1uVBN6cfeh0Em9I/EvDcofcW71Iz/Q/0UUuHM/4z3DN0wmHNEJDuMoR3B92YvugyQ3gK+yHBmV4zhPBWIKdd74O9FTrYjjWnW+/zPiG6J8/p1gdmy48Pg25ML0J7ZI0hrJ1ki05MZYawCR5xmnLfOaC5MwzhjPLo06JG0PTDnxjCn0aBI06vGjZD47BWa9rbKVkRtVmrHTa8D850pjOd6UxnGrz+D+oAKCkz4+U2AAAAAElFTkSuQmCC"})}),Object(x.jsxs)("div",{className:"right",children:[Object(x.jsx)("div",{className:"active-circle",style:{backgroundColor:t.themUser.active?"#29F90A":"#ED3C3D"}}),Object(x.jsx)("div",{style:{fontSize:"1em",fontWeight:"bold"},children:e.getName(t.names)}),Object(x.jsx)("div",{style:{fontWeight:"300"},children:t.messages.length?t.messages[t.messages.length-1].message.length>20?t.messages[t.messages.length-1].message.slice(0,20)+"...":t.messages[t.messages.length-1].message:"Send a chat"})]})]},s)}))}),Object(x.jsx)(B,{model:this.state.showModal,children:Object(x.jsxs)("div",{className:"modal-content",children:[Object(x.jsx)(T.a,{onClick:function(){return e.setState({showModal:!1})},className:"close-icon"}),Object(x.jsx)("div",{className:"heade",children:"Create A New Chat"}),Object(x.jsxs)("div",{className:"search-input",children:[Object(x.jsx)("input",{value:this.state.searchUser,onChange:function(t){return e.setUserSearch(t)},type:"text",placeholder:"Search By Email"}),Object(x.jsx)(y.a,{className:"search-icon"})]}),Object(x.jsx)("div",{className:"users",children:this.state.users.map((function(t,s){return Object(x.jsxs)("div",{className:"user",children:[Object(x.jsxs)("div",{children:[t.firstName," ",t.lastName]}),Object(x.jsx)("div",{children:t.email}),Object(x.jsx)(w.a,{onClick:function(){return e.addConversation(t)},className:"add"})]},s)}))})]})}),Object(x.jsx)(B,{model:this.state.showMessage,zIndex:"25",backgroundColor:"rgba(0, 0, 0, 0.5)",children:Object(x.jsx)("div",{className:"modal-message",children:Object(x.jsx)("div",{className:"modal-message-content",children:this.state.modalMessage})})})]})}}]),s}(a.Component),Y=(s(117),s(76)),F=s.n(Y),D=s(78),P=s.n(D);s(146);function J(e){var t,s=new Date(e),a=s.getHours(),n=s.getMinutes();return a<10&&0!==a?a="0"+a:a>12?a-=12:0===a&&(a=12),(t=n)<10&&(t="0"+t),a+":"+(n=t)}var R,W=s(30),L=s.n(W),G=s(77),H=s.n(G),Z=function(e){Object(u.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).sendMessage=function(e){"onKeyUp"===e._reactName&&"Enter"!==e.code||a.state.inputVal.length&&j.a.post("/api/chat/add-message",{sentFromId:a.props.user._id,message:a.state.inputVal,chatId:a.props.activeChat._id}).then((function(e){e.data.success&&(a.props.sendMessage(a.props.activeChat),a.setState({inputVal:""}))}))},a.computeOffsetBottom=function(){if(a.anchorRef.current){var e=a.anchorRef.current.getBoundingClientRect().bottom,t=a.props.offset;Math.floor(e)>window.innerHeight?a.setState({bottom:t+44}):a.setState({bottom:t})}},a.showSidebar=function(){window.innerWidth>700||(U()("#side-bar-wrapper").show(),U()("#main-chat-wrapper").hide())},a.state={inputVal:""},a.anchorRef=n.a.createRef(),a.handleScroll=H()(a.computeOffsetBottom,200),a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){this.handleScroll.cancel(),window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{className:"main-chat-wrapper",id:"main-chat-wrapper",style:{backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundImage:this.props.user.chatBg&&this.props.user.chatBg.url?"url(".concat(this.props.user.chatBg.url,")"):"url()"},children:[Object.keys(this.props.activeChat).length?Object(x.jsx)("div",{className:"messages",id:"messages",children:this.props.activeChat.messages.map((function(t,s){return Object(x.jsxs)("div",{className:t.sentFromId===e.props.user._id?"message my-message":"message them-message",children:[Object(x.jsx)("div",{children:t.message}),Object(x.jsx)("div",{children:J(t.createdAt)})]},s)}))}):"",Object(x.jsx)("div",{onClick:this.showSidebar,className:"go-back",style:{backgroundColor:"rgba(255, 255, 255, 0.80)"},children:Object(x.jsx)(L.a,{style:{fontSize:"2.2em"}})}),Object(x.jsxs)("div",{id:"chat-box",className:"text-input",ref:this.anchorRef,children:[Object(x.jsx)("input",{onKeyUp:this.sendMessage,value:this.state.inputVal,onChange:function(t){return e.setState({inputVal:t.target.value})},type:"text",placeholder:"Send a message"}),Object(x.jsx)(P.a,{onClick:this.sendMessage,className:"send-icon"})]})]})}}]),s}(n.a.Component),z=function(e){Object(u.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e))._isMounted=!0,a.getUser=function(){f("GET_USER").then((function(e){e&&a.setState({user:e})}))},a.getConversations=function(){f("GET_USER").then((function(e){j.a.post("/api/chat/get-chats",{user:e}).then((function(e){if("false"!=e.data.success&&a._isMounted){var t=Object.keys(a.state.activeChat).length?e.data.find((function(e){return e._id===a.state.activeChat._id})):{};a.setState({conversations:e.data,activeChat:t});var s=document.getElementById("messages");s&&(s.scrollTop=s.scrollHeight)}}))}))},a.setActiveChat=function(e){a.setState({activeChat:e}),a.getConversations()},a.sendMessage=function(e){a.getConversations();var t=e.userIds.filter((function(e){return e!==a.state.user._id}))[0];R.emit("newMessage",e._id,t)},a.emitNewConversation=function(e){a.getConversations(),R.emit("newConversation",e)},a.state={user:null,activeChat:{},id:null,conversations:[]},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=!0;localStorage.getItem("LPU")?(new Date-new Date(JSON.parse(localStorage.getItem("LPU"))))/1e3>60?(t=!0,localStorage.setItem("LPU",JSON.stringify(new Date))):t=!1:localStorage.setItem("LPU",JSON.stringify(new Date));U()("#message").hide(),t&&(setTimeout((function(){U()("#message").slideDown(200)}),300),setTimeout((function(){U()("#message").slideUp(200)}),4500)),f("GET_USER").then((function(t){e.getConversations(),t?((R=F()("https://calebjustice.com:9000")).emit("connection",t),R.on("connection",(function(){console.info("socket connection established on port 9000")})),R.on("conversation",(function(){e.getConversations()})),R.on("incomingMessage",(function(){e.getConversations()})),e.setState({user:t})):e.props.history.push("/sign-in")}))}},{key:"componentWillUnmount",value:function(){R.emit("leave",this.state.user._id),this._isMounted=!1}},{key:"render",value:function(){return this.state.user&&JSON.stringify(this.state.user.socketId)+this.state.user.active,Object(x.jsxs)("div",{className:"chat-wrapper",style:{overflow:"hidden"},children:[Object(x.jsx)("div",{id:"message",children:Object(x.jsx)("div",{className:"content",children:Object(x.jsx)("div",{children:"You will need to refresh if re-opening tab"})})}),Object(x.jsx)("div",{className:"sidebar",children:Object(x.jsx)(k,{emitNewConversation:this.emitNewConversation,conversations:this.state.conversations,activeChat:this.state.activeChat,setActiveChat:this.setActiveChat,user:this.state.user})}),Object(x.jsx)("div",{className:"chat",children:Object.keys(this.state.activeChat).length?Object(x.jsx)(Z,{user:this.state.user,sendMessage:this.sendMessage,activeChat:this.state.activeChat}):""})]})}}]),s}(n.a.Component),Q=(s(147),s(79)),V=s.n(Q),X=["image/jpeg","image/jpg","image/png","image/pdf"],K=function(e){Object(u.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleFileInputChange=function(e,t){var s=e.target.files[0];X.includes(s.type)?(a.setState({message:""}),a.previewFile(s,t)):a.setState({message:"Must be either jpg, pdf, or png"})},a.previewFile=function(e,t){if(e.size>1e7)a.setState({message:"File size too big"});else{var s=new FileReader;s.readAsDataURL(e),s.onloadend=function(){a.setState(Object(p.a)({},"avatar"===t?"previewSource":"previewSourceBg",s.result))}}},a.handleSubmitFile=function(e,t){if(e.preventDefault(),"avatar"===t){if(a.state.isUploading||a.state.message.length>0||"Success"===a.state.messages||!a.state.previewSource||Object.keys(a.state.user)<1)return;a.setState({isUploading:!0}),j.a.post("/api/users/upload-image",JSON.stringify({data:a.state.previewSource,_id:a.state.user._id})).then((function(e){a.setState({isUploading:!1}),e.data&&e.data.message?a.setState({message:e.data.message,fileInput:"",previewSource:"",showPopup:!0}):a.setState({fileInput:"",previewSource:"",message:"Success",showPopup:!0}),setTimeout((function(){a.setUser()}),200),setTimeout((function(){a.setState({showPopup:!1,message:""})}),2e3)})).catch((function(){a.setState({showPopup:!0,message:"Something went wrong uploading image",isUploading:!1})}))}else{if(a.state.isUploading||a.state.message.length>0||"Success"===a.state.messages||!a.state.previewSourceBg||Object.keys(a.state.user)<1)return;a.setState({isUploading:!0}),j.a.post("/api/chat/upload-bg-image",JSON.stringify({data:a.state.previewSourceBg,_id:a.state.user._id})).then((function(e){a.setState({isUploading:!1}),e.data&&e.data.message?a.setState({message:e.data.message,fileInputBg:"",previewSourceBg:"",showPopup:!0}):a.setState({message:"Success",fileInputBg:"",previewSource:"",showPopup:!0}),setTimeout((function(){a.setUser()}),200),setTimeout((function(){a.setState({showPopup:!1,message:""})}),2e3)}))}},a.setUser=function(){f("GET_USER").then((function(e){e?a.setState({user:e,inputVal:e.firstName}):a.props.history.push("/sign-in")}))},a.state={user:{},inputVal:"",fileInput:"",fileInputBg:"",previewSource:"",previewSourceBg:"",message:"",isUploading:!1,showPopup:!1},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){this.setUser()}},{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{className:"settings-wrapper",children:[Object(x.jsx)(B,{model:this.state.isUploading,noBg:!0,children:Object(x.jsx)(V.a,{className:"loading"})}),Object(x.jsx)(B,{model:this.state.showPopup,children:Object(x.jsx)("div",{style:{padding:"10px 20px",fontSize:"1.5em",borderRadius:"8px"},children:this.state.message})}),Object(x.jsx)(d.b,{to:"/chat",children:Object(x.jsx)(L.a,{className:"back"})}),Object(x.jsxs)("div",{className:"header",children:[Object(x.jsx)("div",{children:"My Profile"}),Object(x.jsx)(d.b,{to:"/my-images",children:Object(x.jsx)("button",{className:"image-btn",style:{border:"none",fontSize:".5em"},children:"View all my images"})})]}),Object(x.jsxs)("div",{className:"cards",children:[Object(x.jsxs)("div",{className:"left",children:[Object(x.jsxs)("div",{className:"img-uploader",children:[Object(x.jsx)("div",{children:"Upload Avatar Image"}),Object(x.jsx)("div",{className:"upload-box",children:Object(x.jsx)("input",{onChange:function(t){return e.handleFileInputChange(t,"avatar")},type:"file"})}),Object(x.jsx)("div",{style:{color:"Success"===this.state.message?"green":"red",fontSize:".8em",margin:"20px 0"},children:this.state.message}),Object(x.jsx)("button",{className:"image-btn",style:{marginTop:"20px"},onClick:function(t){return e.handleSubmitFile(t,"avatar")},children:"Save"})]}),this.state.previewSource?Object(x.jsx)("img",{className:"display-image",src:this.state.previewSource}):this.state.user.avatar&&this.state.user.avatar.url?Object(x.jsx)("img",{style:{borderRadius:"50%",objectFit:"cover",margin:"20px auto 0 25px",width:"25vw",height:"25vw"},className:"display-image",src:this.state.user.avatar.url}):Object(x.jsx)("img",{className:"display-image",src:this.state.previewSource})]}),Object(x.jsxs)("div",{className:"right",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:"Change First Name"}),Object(x.jsx)("input",{onChange:function(t){return e.setState({inputVal:t.target.value})},type:"text",placeholder:"Change first name",value:this.state.inputVal})]}),Object(x.jsx)("div",{className:"button-wrapper",children:Object(x.jsx)("button",{className:"image-btn",style:{marginTop:"20px"},children:"Save"})}),Object(x.jsxs)("div",{className:"img-uploader prof",children:[Object(x.jsx)("div",{children:"Upload Image For Chat Background (optional)"}),Object(x.jsx)("div",{className:"upload-box",children:Object(x.jsx)("input",{onChange:function(t){return e.handleFileInputChange(t,"bg")},type:"file"})}),Object(x.jsx)("div",{style:{color:"Success"===this.state.message?"green":"red",fontSize:".8em",margin:"20px 0"},children:this.state.message}),Object(x.jsx)("button",{className:"image-btn",style:{marginTop:"20px"},onClick:function(t){return e.handleSubmitFile(t,"bg")},children:"Save"})]}),this.state.previewSourceBg?Object(x.jsx)("img",{className:"display-image",src:this.state.previewSourceBg}):this.state.user.chatBg?Object(x.jsx)("img",{style:{objectFit:"cover",margin:"20px auto 0 25px",width:"25vw",height:"25vw"},className:"display-image",src:this.state.user.chatBg.url}):Object(x.jsx)("img",{className:"display-image",src:this.state.previewSourceBg})]})]})]})}}]),s}(n.a.Component),q=(s(148),s(81)),_=s.n(q),$=s(80),ee=s.n($),te=function(e){Object(u.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).getUser=function(){f("GET_USER").then((function(e){e?a.setState({user:e}):a.props.history.push("/sign-in")}))},a.setUserAvatar=function(e){console.log(a.state.selectedImg),j.a.post("/api/users/set-avatar",{userId:a.state.user._id,publicId:a.state.selectedImg.publicId,url:a.state.selectedImg.url,type:e}).then((function(e){a.setState({showMessage:!0,message:e.data.message})})).catch((function(){a.setState({showMessage:!0,message:"Something went wrong, try again"})})),setTimeout((function(){a.setState({message:"",showMessage:!1,addAvatarPopup:!1,addBgImagePopup:!1})}),2200)},a.removeImage=function(){j.a.post("/api/users/remove-image",{userId:a.state.user._id,publicId:a.state.selectedImg.publicId,url:a.state.selectedImg.url}).then((function(e){a.setState({showMessage:!0,message:e.data.message}),a.getUser()})).catch((function(){a.setState({showMessage:!0,message:"Something went wrong, try again"})})),setTimeout((function(){a.setState({message:"",showMessage:!1,deletePopup:!1})}),2200)},a.state={user:null,deletePopup:!1,addBgImagePopup:!1,addAvatarPopup:!1,selectedImg:"",message:"",showMessage:!1},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"render",value:function(){var e=this,t="";return this.state.user&&0===this.state.user.images.length&&(t="<div>You have no images uploaded yet</div>"),Object(x.jsxs)("div",{className:"my-images",children:[Object(x.jsx)(d.b,{to:"/settings",children:Object(x.jsx)(L.a,{className:"back-icon"})}),Object(x.jsx)("div",{className:"header",children:"My Images"}),Object(x.jsx)("div",{className:"images",children:this.state.user?this.state.user.images.map((function(t,s){return Object(x.jsxs)("div",{className:"my-image",children:[Object(x.jsx)("img",{src:t.url}),Object(x.jsxs)("div",{className:"actions",children:[Object(x.jsx)(T.a,{onClick:function(){return e.setState({deletePopup:!0,selectedImg:t})},className:"delete"}),Object(x.jsx)(ee.a,{onClick:function(){return e.setState({addBgImagePopup:!0,selectedImg:t})},style:{cursor:"pointer"}}),Object(x.jsx)(_.a,{onClick:function(){return e.setState({addAvatarPopup:!0,selectedImg:t})},className:"account"})]})]},s)})):"Not signed in"}),Object(x.jsx)("div",{style:{textAlign:"center",fontSize:"1.5em",marginTop:"30px"},dangerouslySetInnerHTML:{__html:t}}),Object(x.jsx)(B,{model:this.state.deletePopup,children:Object(x.jsxs)("div",{className:"confirm-delete",children:[Object(x.jsx)("div",{children:"Are you sure you wish to delete this image?"}),Object(x.jsxs)("div",{className:"buttons",children:[Object(x.jsx)("button",{onClick:function(){return e.setState({deletePopup:!1})},children:"Cancel"}),Object(x.jsx)("button",{onClick:function(){return e.removeImage()},children:"Confirm"})]})]})}),Object(x.jsx)(B,{model:this.state.addBgImagePopup,children:Object(x.jsxs)("div",{className:"confirm-delete",children:[Object(x.jsx)("div",{children:"Do you want to set this as your background image?"}),Object(x.jsxs)("div",{className:"buttons",children:[Object(x.jsx)("button",{onClick:function(){return e.setState({addBgImagePopup:!1})},children:"Cancel"}),Object(x.jsx)("button",{onClick:function(){return e.setUserAvatar("chatBg")},children:"Confirm"})]})]})}),Object(x.jsx)(B,{model:this.state.addAvatarPopup,children:Object(x.jsxs)("div",{className:"confirm-delete",children:[Object(x.jsx)("div",{children:"Do you want to set this as your avatar?"}),Object(x.jsxs)("div",{className:"buttons",children:[Object(x.jsx)("button",{onClick:function(){return e.setState({addAvatarPopup:!1})},children:"Cancel"}),Object(x.jsx)("button",{onClick:function(){return e.setUserAvatar("avatar")},children:"Confirm"})]})]})}),Object(x.jsx)(B,{model:this.state.showMessage,zIndex:"25",children:Object(x.jsx)("div",{style:{padding:"10px",fontSize:"1.5em",fontWeight:"500"},children:this.state.message})})]})}}]),s}(n.a.Component),se=function(e){Object(u.a)(s,e);var t=Object(l.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={user:null},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;f("GET_USER").then((function(t){t&&e.setState({user:t})}))}},{key:"componentWillUnmount",value:function(){this.state.user&&j.a.post("/api/users/set-inactive",{userId:this.state.user._id}).then((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(x.jsx)("div",{className:"app",children:Object(x.jsx)(d.a,{children:Object(x.jsxs)(h.d,{children:[Object(x.jsx)(h.b,{exact:!0,path:"/",children:Object(x.jsx)(h.a,{to:"/chat"})}),Object(x.jsx)(h.b,{exact:!0,path:"/sign-in",component:C}),Object(x.jsx)(h.b,{path:"/my-images",component:te}),Object(x.jsx)(h.b,{path:"/chat",component:z}),Object(x.jsx)(h.b,{path:"/settings",component:K}),Object(x.jsx)(h.b,{render:function(){return Object(x.jsx)("div",{children:"404"})}})]})})})}}]),s}(n.a.Component),ae=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,162)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;s(e),a(e),n(e),i(e),r(e)}))};j.a.defaults.baseURL="https://calebjustice.com:9000",j.a.defaults.headers.post["Content-Type"]="application/json",j.a.defaults.headers.common.Authorization=localStorage.getItem("JWT_PAYLOAD"),r.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(se,{})}),document.getElementById("root")),ae()},87:function(e,t,s){}},[[150,1,2]]]);
//# sourceMappingURL=main.faf1f129.chunk.js.map